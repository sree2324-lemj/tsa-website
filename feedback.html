<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="style.css">
  <title>Reosurce Hub Feedback</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&display=swap" rel="stylesheet">
</head>
<body>
    <header class="main-header">
        <h1 class="logo"><a class="no-hover" href="index.html">CARY RESOURCE HUB</a></h1>
        <ul>
            <li><a href="feedback.html" class="active">Feedback</a></li>
            <li><a href="#">Search</a></li>
        </ul>
    </header>
    <div style="padding:100px 100px;width:60%">
      <p style="font-size:64px;font-family:Merriweather;font-weight:bold">Feedback</p>
      <p style="width:100%">We would love to hear your comments on our webstie. Cary is a rich community with many resources that aren't listed on this website so we are ready to implement the resources you recommend. We are also seeking out any of your suggestions on the website infrastructure. Write your comments in the box below and hit submit when finished.</p>
      
      <span id="0" onclick="Rate(1)" style="font-size:50px;color:white;-webkit-text-stroke:2px #d57146">&#9734;</span>
      <span id="1" onclick="Rate(2)" style="font-size:50px;color:white;-webkit-text-stroke:2px #d57146">&#9734;</span>
      <span id="2" onclick="Rate(3)" style="font-size:50px;color:white;-webkit-text-stroke:2px #d57146">&#9734;</span>
      <span id="3" onclick="Rate(4)" style="font-size:50px;color:white;-webkit-text-stroke:2px #d57146">&#9734;</span>
      <span id="4" onclick="Rate(5)" style="font-size:50px;color:white;-webkit-text-stroke:2px #d57146">&#9734;</span>
      
      <textarea id="js-feedback" class="feedback-box" placeholder="Comments..."></textarea>
      <button class="submit-button" id="js-submit-button">Submit</button>
      
    </div>
    <footer>
      2025 Green Level High TSA Chapter 25-26
    </footer>
  <script>
    let rating;
    const buttonElement = document.getElementById('js-submit-button');
    buttonElement.addEventListener('click', () => {
      getFeedback();
    })
    function Rate(ratingValue) {
      for(let i=0;i<5;i++) {
        if(i<ratingValue) {
          document.getElementById(i).style.color = "#d57146";
        } else {
          document.getElementById(i).style.color = "white";
        }
      }
      rating = ratingValue;
    }
    function getFeedback() {
      const feedBackElement = document.getElementById('js-feedback');
      let feedback = feedBackElement.value;
      if (feedback.length === 0) {
        alert("Please enter feedback before submitting.");
        return;
      }
      alert("Feedback Submitted");
      feedBackElement.value = '';
      postFeedback(feedback);
      
    }

    async function postFeedback(feedback) {
      console.log("calling the fetch method to route to save on the server")
      if (!rating) {
        rating = 0;
      }
      await fetch('/save', {
        method:'POST',
        'Content-type':'application/json',
        body:JSON.stringify({
          'rating': rating,
          'feedback': feedback
        })
      });

    }
    
  </script>
</body>
</html>

